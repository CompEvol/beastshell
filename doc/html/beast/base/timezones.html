<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Time Zones</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">
</head><body>

<table width="100%" summary="page for timezones {base}"><tr><td>timezones {base}</td><td align="right">R Documentation</td></tr></table>

<h2>Time Zones</h2>

<h3>Description</h3>

<p>Information about time zones in <font face="Courier New,Courier" color="#666666"><b>R</b></font>.  <code>Sys.timezone</code> returns
the name of the current time zone.
</p>


<h3>Usage</h3>

<pre>
Sys.timezone(location = TRUE)

OlsonNames()
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>location</code></td>
<td>
<p>logical: should an attempt be made to find the
location name as used in the Olson/IANA database?
(See &lsquo;Time zone names&rsquo; below.)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Time zones are a system-specific topic, but these days almost all <font face="Courier New,Courier" color="#666666"><b>R</b></font>
platforms use similar underlying code, used by Linux, OS X, Solaris,
AIX, FreeBSD, Sun Java &gt;= 1.4 and Tcl &gt;= 8.5, and installed with <font face="Courier New,Courier" color="#666666"><b>R</b></font> on
Windows.  Unfortunately there are many system-specific errors in the
implementations.  It is possible to use <font face="Courier New,Courier" color="#666666"><b>R</b></font>'s own version of the code
on Unix-alikes as well as on Windows: this is the default for OS X and
recommended for Solaris.
</p>
<p>It should be possible to set the time zone via the environment
variable <span class="env">TZ</span>: see the section on &lsquo;Time zone names&rsquo; for
suitable values.  <code>Sys.timezone()</code> will return the value of
<span class="env">TZ</span> if set (and on some OSes it is always set), otherwise it will
try to retrieve a value which if set for <span class="env">TZ</span> would give the
current time zone.  This is not in general possible, and
<code>Sys.timezone(FALSE)</code> on Windows will retrieve the abbreviation
used for the current time.
</p>
<p>If <span class="env">TZ</span> is set but empty or invalid, most platforms default to
<span class="samp">UTC</span>, the time zone colloquially known as <span class="samp">GMT</span> (see
<a href="http://en.wikipedia.org/wiki/Coordinated_Universal_Time">http://en.wikipedia.org/wiki/Coordinated_Universal_Time</a>).  (Some
but not all platforms will give a warning for invalid timezones.)
</p>
<p>Time zones did not come into use until the second half of the
nineteenth century and were not widely adopted until the twentieth,
and <EM>daylight saving time</EM> (DST, also known as <EM>summer
time</EM>) was first introduced in the early twentieth century, most
widely in 1916. Over the last 100 years places have changed their
affiliation between major time zones, have opted out of (or in to) DST
in various years or adopted DST rule changes late or not at all.
</p>
<p>The most common system implementation of <code>POSIXct</code> is as signed
32-bit integers and so only goes back to the end of 1901: on such
systems <font face="Courier New,Courier" color="#666666"><b>R</b></font> assumes that dates prior to that are in the same time zone
as they were in 1902.  Most of the world had not adopted time zones by
1902 (so used local &lsquo;mean time&rsquo; based on longitude) but for
some places there had been time-zone changes before then.  64-bit
representations are becoming common; unfortunately on some 64-bit OSes
the database information is only available for the range 1901&ndash;2038.
</p>


<h3>Value</h3>

<p><code>Sys.timezone</code> returns an OS-specific character string, possibly
<code>NA</code> or an empty string (which on some OSes means <span class="samp">UTC</span>)..
For the default <code>location = TRUE</code> this will be a location such as
<code>"Europe/London"</code> if one can be ascertained.  For <code>location
  = FALSE</code> this may be an abbreviation such as <code>"EST"</code> or
<code>"CEST"</code> on Windows.
</p>
<p><code>OlsonNames</code> returns a character vector.
</p>


<h3>Time zone names</h3>

<p>Where OSes describe their valid time zones can be obscure.  The help
for the C function <code>tzset</code> can be helpful, but it can also be
inaccurate.  There is a cumbersome POSIX specification (listed under
environment variable <span class="env">TZ</span> at
<a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08">http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08</a>),
which is often at least partially supported, but there are other more
user-friendly ways to specify time zones.
</p>
<p>Almost all <font face="Courier New,Courier" color="#666666"><b>R</b></font> platforms make use of a time-zone database originally
compiled by Arthur David Olson and now managed by IANA, in which the
preferred way to refer to a time zone is by a location (typically of a
city) e.g. <code>Europe/London</code>, <code>America/Los_Angeles</code>,
<code>Pacific/Easter</code>.  Some traditional designations are also allowed
such as <code>EST5EDT</code> or <code>GB</code>.  (Beware that some of these
designations may not be what you expect: in particular <code>EST</code> is a
time zone used in Canada <EM>without</EM> daylight saving time, and not
<code>EST5EDT</code> nor (Australian) Eastern Standard Time.)  The
designation can also be an optional colon prepended to the path to a
file giving complied zone information (and the examples above are all
files in a system-specific location).  See
<a href="http://www.twinsun.com/tz/tz-link.htm">http://www.twinsun.com/tz/tz-link.htm</a> for more details and
references.  By convention, regions with a unique time-zone history
since 1970 have specific names in the database, but those with
different earlier histories may not.  Each time zone has one or two
(the second for DST) <EM>abbreviations</EM> used when formatting times.
</p>
<p>The abbreviations used have changed over the years: for example France
used <span class="samp">PMT</span> (&lsquo;Paris Mean Time&rsquo;) from 1891 to 1911 then
<span class="samp">WET/WEST</span> up to 1940 and <span class="samp">CET/CEST</span> from 1946.  (In almost
all time zones they have been stable since 1970.)  The POSIX standard
allows only one or two abbreviations per time zone, so you may see the
current abbreviation(s) used for older times: more so in versions of
<font face="Courier New,Courier" color="#666666"><b>R</b></font> prior to 3.1.0.
</p>
<p>The function <code>OlsonNames</code> returns the time-zone names known to
the Olson/IANA database on the current system. The system-specific
location in the file system varies, e.g.  &lsquo;<span class="file">/usr/share/zoneinfo</span>&rsquo;
(Linux, OS X, FreeBSD), &lsquo;<span class="file">/usr/share/lib/zoneinfo</span>&rsquo; (Solaris, AIX),
....  It is likely that there is a file named something like
&lsquo;<span class="file">zone.tab</span>&rsquo; under that directory listing the locations known as
time-zone names (but not for example <code>EST5EDT</code>): this is read by
<code>OlsonNames</code>.  See also
<a href="http://en.wikipedia.org/wiki/Zone.tab">http://en.wikipedia.org/wiki/Zone.tab</a>.
</p>
<p>Where <font face="Courier New,Courier" color="#666666"><b>R</b></font> was configured with option <span class="option">--with-internal-tzcode</span>
(the default on OS X and Windows: recommended on Solaris), the
database at <code>file.path(R.home("share"), "zoneinfo")</code> is used by
default: file &lsquo;<span class="file">VERSION</span>&rsquo; in that directory states the version.
Environment variable <span class="env">TZDIR</span> can be used to point to a different
&lsquo;<span class="file">zoneinfo</span>&rsquo; directory (this is also supported by some OSes,
e.g. Linux).
</p>
<p>Most platforms support time zones of the form <span class="samp">GMT+n</span> and
<span class="samp">GMT-n</span>, which assume at a fixed offset from UTC (hence no DST).
Contrary to some expectations (but consistent with names such as
<span class="samp">PST8PDT</span>), negative offsets are times ahead of (east of) UTC,
positive offsets are times behind (west of) UTC.
</p>


<h3>Note</h3>

<p>Since 2007 there has been considerable disruption over changes to the
timings of the DST transitions, aimed at energy conservation.  These
often have short notice and time-zone databases may not be up to date.
(Chile has in the recent past announced changes at <EM>5 days</EM>
notice, and in 2014 Turkey gave only a month's notice.)
</p>
<p>Note that except where replaced, the operation of time zones is an OS
service, and even where replaced a third-party database is used and
can be updated (see the section on &lsquo;Time zone names&rsquo;).
Incorrect results will never be an <font face="Courier New,Courier" color="#666666"><b>R</b></font> issue, so please ensure that you
have the courtesy not to blame <font face="Courier New,Courier" color="#666666"><b>R</b></font> for them.
</p>


<h3>See Also</h3>

<p><code><a href="Sys.time.html">Sys.time</a></code>, <code><a href="as.POSIXlt.html">as.POSIXlt</a></code>.
</p>
<p><a href="http://en.wikipedia.org/wiki/Time_zone">http://en.wikipedia.org/wiki/Time_zone</a> and
<a href="http://www.twinsun.com/tz/tz-link.htm">http://www.twinsun.com/tz/tz-link.htm</a> for extensive sets of links.
</p>


<h3>Examples</h3>

<pre>
Sys.timezone()

str(OlsonNames()) ## a few hundred names
</pre>

<hr><div align="center">[Package <em>base</em> version 3.2.0 <a href="00Index.html">Index</a>]</div>
</body></html>
